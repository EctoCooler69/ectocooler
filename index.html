<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splash Screen - Ecto Cooler</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash-screen">
        <audio id="background-audio" autoplay loop>
            <source src="audio/gbinstr.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <img id="splash-gif" src="ectomeme.gif" alt="Splash Screen">
        <a href="home.html" id="enter-button">SMASH</a>
        <div id="mute-toggle" style="position: absolute; top: 20px; right: 20px; cursor: pointer;">
            ðŸ”Š
        </div>
    </div>

    <!-- JavaScript to Handle Audio Continuity and Mute Toggle -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let audioElement = document.getElementById('background-audio');
            let muteToggle = document.getElementById('mute-toggle');

            // Check if audio is already playing and its state
            if (!sessionStorage.getItem('audioPlaying')) {
                sessionStorage.setItem('audioPlaying', 'true');
                audioElement.play();
            } else {
                audioElement.currentTime = sessionStorage.getItem('audioTime');
                audioElement.play();
            }

            // Save the current time of the audio before leaving the page
            window.addEventListener('beforeunload', function() {
                sessionStorage.setItem('audioTime', audioElement.currentTime);
            });

            // Toggle mute/unmute
            muteToggle.addEventListener('click', function() {
                if (audioElement.muted) {
                    audioElement.muted = false;
                    muteToggle.textContent = 'ðŸ”Š';
                } else {
                    audioElement.muted = true;
                    muteToggle.textContent = 'ðŸ”‡';
                }
            });

            // Redirect to homepage
            document.getElementById('enter-button').addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default link behavior
                window.location.href = "home.html"; // Redirect to the main site
            });
        });
    </script>
</body>
</html>
